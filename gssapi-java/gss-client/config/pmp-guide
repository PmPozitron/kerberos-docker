после установки krb5-user & krb5-config
(+ openssh-client, но хз зачем я его ставил;
+ sudo apt-get install -y libsasl2-modules-gssapi-mit, тоже хз надо ли, в одном гайде упомянут;
без них ошибка text=SASL(-4): no mechanism available: Couldn't find mech GSSAPI,
а после их установки text=SASL(-1): generic failure: GSSAPI Error: Unspecified GSS failure.  Minor code may provide more information (Permission denied))
более того, похоже, нужен аж такой перечень
apt install sasl2-bin libsasl2-2 libsasl2-modules libsasl2-modules-gssapi-mit
после этого появляется куча sasl механизмов, которые первоначально отсутствовали
root@openldap:/# ldapsearch -x -H ldapi:/// -b "" -LLL -s base -Z supportedSASLMechanisms
ldap_start_tls: Protocol error (2)
        additional info: unsupported extended operation
dn:
supportedSASLMechanisms: GS2-IAKERB
supportedSASLMechanisms: GS2-KRB5
supportedSASLMechanisms: SCRAM-SHA-1
supportedSASLMechanisms: SCRAM-SHA-256
supportedSASLMechanisms: GSSAPI
supportedSASLMechanisms: GSS-SPNEGO
supportedSASLMechanisms: DIGEST-MD5
supportedSASLMechanisms: EXTERNAL
supportedSASLMechanisms: NTLM
supportedSASLMechanisms: CRAM-MD5
supportedSASLMechanisms: LOGIN
supportedSASLMechanisms: PLAIN
---
permission denied, похоже, лечится chmod 640 /etc/krb5.keytab
после этого вылезает
64c102f9.09967ec8 0x7f78b7fff700 SASL [conn=1003] Failure: GSSAPI Error: Unspecified GSS failure.  Minor code may provide more information (Request ticket server ldap/localhost@EXAMPLE.COM found in keytab but does not match server principal ldap/openldap@)
64c102f9.09989c94 0x7f78b7fff700 conn=1003 op=0 RESULT tag=97 err=49 qtime=0.000031 etime=0.000786 text=SASL(-13): authentication failure: GSSAPI Failure: gss_accept_sec_context
а эта херня (Request ticket server ldap/localhost@EXAMPLE.COM found in keytab but does not match server principal ldap/openldap@) полечилась правкой хоста в настройках подключения (network parameter\hostname в apache directory studio), замена localhost -> openldap привела к успеху.
есс-но, в hosts потребовалось написать соот-ие localhost & openldap, чтобы по openldap:1389 apache directory studio действительно попадала бы в openldap.
не знаю уж почему наличие в китабе обоих (ldap/localhost@EXAMPLE.COM + ldap/openldap@EXAMPLE.COM) не привело к успеху.

на openldap тачку создаём принципала, добавляем его в кейтаб, копируем кейтаб на опенлдап тачку вместе с клиентской конфой:

kadmin
add_principal -randkey ldap/openldap@EXAMPLE.COM
ktadd -k /etc/krb5.keytab ldap/openldap@EXAMPLE.COM


===================
оказывается, нужен ещё и пакет krb5-kdc-ldap + schema2ldif (поставил на тачку с kdc; добавил ещё и на лдапную)
https://ubuntu.com/server/docs/service-kerberos-with-openldap-backend

там какой-то замут с юзерами, под рутом не выдаётся ничерта в ldapsearch -Y EXTERNAL -H ldapi:// -b cn=config, а не под рутом при импорте вылезает ошибка "нужен рут"
обновил рутовый пароль на secret на лдап тачке:
заходим в контейнер рутом: docker exec -u root -it openldap bash
меняем пароль: root@openldap:/# passwd
выходим и заходим заново не рутом

===================
I have no name!@openldap:/$ ldapsearch -Y GSSAPI -H ldap://localhost:1389 -b ou=users,dc=example,dc=org uid=user01
SASL/GSSAPI authentication started
SASL username: pmp@EXAMPLE.COM
SASL SSF: 112
SASL data security layer installed.
# extended LDIF
#
# LDAPv3
# base <ou=users,dc=example,dc=org> with scope subtree
# filter: uid=user01
# requesting: ALL
#

# user01, users, example.org
dn: cn=user01,ou=users,dc=example,dc=org
cn: User1
cn: user01
sn: Bar1
objectClass: inetOrgPerson
objectClass: posixAccount
objectClass: shadowAccount
userPassword:: Yml0bmFtaTE=
uid: user01
uidNumber: 1000
gidNumber: 1000
homeDirectory: /home/user01

# search result
search: 4
result: 0 Success

# numResponses: 2
# numEntries: 1
===================
I have no name!@openldap:/$ KRB5_TRACE=/dev/stdout ldapsearch -Y GSSAPI -H ldap://localhost:1389 -b ou=users,dc=example,dc=org uid=user0
1
SASL/GSSAPI authentication started
[128] 1690390493.324342: ccselect module realm chose cache FILE:/tmp/krb5cc_1001 with client principal pmp@EXAMPLE.COM for server principal ldap/openldap@EXAMPLE.COM
[128] 1690390493.324343: Getting credentials pmp@EXAMPLE.COM -> ldap/openldap@ using ccache FILE:/tmp/krb5cc_1001
[128] 1690390493.324344: Retrieving pmp@EXAMPLE.COM -> ldap/openldap@ from FILE:/tmp/krb5cc_1001 with result: -1765328243/Matching credential not found (filename: /tmp/krb5cc_1001)
[128] 1690390493.324345: Retrying pmp@EXAMPLE.COM -> ldap/openldap@EXAMPLE.COM with result: 0/Success
[128] 1690390493.324347: Creating authenticator for pmp@EXAMPLE.COM -> ldap/openldap@EXAMPLE.COM, seqnum 362265962, subkey des3-cbc-sha1/1A4A, session key des3-cbc-sha1/29EE
[128] 1690390493.324352: Read AP-REP, time 1690390493.324348, subkey des3-cbc-sha1/1A4A, seqnum 911504382
SASL username: pmp@EXAMPLE.COM
SASL SSF: 112
SASL data security layer installed.
# extended LDIF
#
# LDAPv3
# base <ou=users,dc=example,dc=org> with scope subtree
# filter: uid=user01
# requesting: ALL
#

# user01, users, example.org
dn: cn=user01,ou=users,dc=example,dc=org
cn: User1
cn: user01
sn: Bar1
objectClass: inetOrgPerson
objectClass: posixAccount
objectClass: shadowAccount
userPassword:: Yml0bmFtaTE=
uid: user01
uidNumber: 1000
gidNumber: 1000
homeDirectory: /home/user01

# search result
search: 4
result: 0 Success

# numResponses: 2
# numEntries: 1